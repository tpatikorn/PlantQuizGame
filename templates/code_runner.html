{% extends 'base.html' %}

{% block header %}
    <h1>{% block title %}CODE{% endblock %}</h1>
{% endblock %}

{% block content %}
    <script>
        $(function () {
            $("#validate").on("click", function () {
                const body = JSON.stringify({"problem_id": $("#problem_selector").val(), "code": $("#code").val()});
                console.log(body);
                $.ajax({
                    url: "/coding/code_test",
                    type: "POST",
                    data: body,
                    contentType: "application/json",
                    success: function (data) {
                        alert(`${data[0].length},${data[1].length},${data[2].length}`);
                        console.log(data);
                    },
                    error: function (xhr) {
                        console.log(xhr);
                    }
                });
            });
        });

    </script>
    <select id="problem_selector">
        {% for p in problems %}
            <option value="{{ p.id }}">{{ p.name }}</option>
        {% endfor %}
    </select>
    </select>
    <textarea name="code" id="code" rows="10" style="width:600px"></textarea><br>
    <input type="submit" value="validate" id="validate">
{% endblock %}